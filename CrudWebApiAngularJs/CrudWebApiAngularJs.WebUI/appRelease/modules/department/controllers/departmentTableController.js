"use strict";department.controller("departmentTableController",["$scope","$uibModal","departmentService","ngNotify","$interval",function(e,t,n,i,a){function o(n){var i=t.open({templateUrl:"app/modules/department/views/departmentModal.html",controller:"departmentController",resolve:{departmentEntity:function(){return n}}});i.result.then(function(){e.getPage()},function(){})}e.paginationOptions={skipPageSize:0,takePageSize:5,sortColumns:["id asc"],filters:[]},e.gridOptions={paginationPageSizes:[5,10,15],enableRowSelection:!0,enableRowHeaderSelection:!1,modifierKeysToMultiSelect:!0,noUnselect:!0,multiSelect:!0,paginationPageSize:5,useExternalPagination:!0,useExternalSorting:!0,columnDefs:[{name:"id",visible:!1},{name:"Department Name",field:"name",maxWidth:"300",enableSorting:!1},{name:"Description",field:"description",maxWidth:"120",enableSorting:!1},{name:"Date of creation",field:"createdAt",cellFilter:'date: "dd.MM.yyyy HH:mm"',maxWidth:"185",enableSorting:!1},{name:"action",enableSorting:!1,cellTemplate:'<div class="ui-grid-cell-contents"><button ng-click="grid.appScope.edit(row)">edit</button><button ng-click="grid.appScope.delete(row)">delete</button></div>'}],onRegisterApi:function(t){e.gridApi=t,t.pagination.on.paginationChanged(e,function(t,n){e.paginationOptions.skipPageSize=(t-1)*n,e.paginationOptions.takePageSize=n,e.getPage()}),t.selection.on.rowSelectionChanged(e,function(e){n.selectedId=e.entity.id})}},e.getPage=function(){n.getPageData(e.paginationOptions).then(function(t){e.gridOptions.totalItems=t.totalItems,e.gridOptions.data=t,a(function(){e.gridApi.selection.selectRow(e.gridOptions.data[0])},0,1)},null)},e.getPage(),e["delete"]=function(a){var o=t.open({templateUrl:"app/common/templates/modal/confirmationModal.html"});o.result.then(function(){n["delete"](a.entity.id).then(function(t){i.set("Deleted successed","success");e.gridOptions.data.indexOf(a.entity);e.getPage()},function(e){i.set(e,"error")})},null)},e.edit=function(e){var t=e.entity.clone();o(t)},e.add=function(){var e=n.getDefault();o(e)}}]);