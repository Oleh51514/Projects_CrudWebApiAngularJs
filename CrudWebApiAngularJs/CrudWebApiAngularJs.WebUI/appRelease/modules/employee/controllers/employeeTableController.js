"use strict";employee.controller("employeeTableController",["$scope","$uibModal","employeeService","ngNotify","$interval","departmentService",function(e,t,n,i,a,o){function l(n){var i=t.open({templateUrl:"app/modules/employee/views/employeeModal.html",controller:"employeeController",resolve:{employeeEntity:function(){return n}}});i.result.then(function(){e.getPage()},function(){})}e.$on("tabEmployeeEvent",function(t,n){e.paginationOptions.filters=[],e.paginationOptions.filters.push("DepartmentId =  "+o.selectedId),e.getPage()}),e.paginationOptions={skipPageSize:0,takePageSize:5,sortColumns:["id asc"],filters:[]},e.gridOptions={paginationPageSizes:[5,10,15],enableRowSelection:!0,enableRowHeaderSelection:!1,modifierKeysToMultiSelect:!0,noUnselect:!0,multiSelect:!0,paginationPageSize:5,useExternalPagination:!0,useExternalSorting:!0,columnDefs:[{name:"id",visible:!1},{name:"FirstName",field:"firstName",maxWidth:"300",enableSorting:!1},{name:"LastName",field:"lastName",maxWidth:"120",enableSorting:!1},{name:"Age",field:"age",maxWidth:"70",enableSorting:!1},{name:"Department",field:"department.name",maxWidth:"250"},{name:"action",enableSorting:!1,cellTemplate:'<div class="ui-grid-cell-contents"><button ng-click="grid.appScope.edit(row)">edit</button><button ng-click="grid.appScope.delete(row)">delete</button></div>'}],onRegisterApi:function(t){e.gridApi=t,t.pagination.on.paginationChanged(e,function(t,n){e.paginationOptions.skipPageSize=(t-1)*n,e.paginationOptions.takePageSize=n,e.getPage()})}},e.getPage=function(){n.getPageData(e.paginationOptions).then(function(t){e.gridOptions.totalItems=t.totalItems,e.gridOptions.data=t,a(function(){e.gridApi.selection.selectRow(e.gridOptions.data[0])},0,1)},null)},e["delete"]=function(a){var o=t.open({templateUrl:"app/common/templates/modal/confirmationModal.html"});o.result.then(function(){n["delete"](a.entity.id).then(function(t){i.set("Deleted successed","success");e.gridOptions.data.indexOf(a.entity);e.getPage()},function(e){i.set(e,"error")})},null)},e.edit=function(e){var t=e.entity.clone();l(t)},e.add=function(){var e=n.getDefault();l(e)}}]);